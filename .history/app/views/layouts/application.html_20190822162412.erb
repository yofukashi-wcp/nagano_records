<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>NaganoRecords</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700|Noto+Sans+JP:400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" >
    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
    <% self_css_path = "/assets/"+controller.controller_name  %>
    <%= stylesheet_link_tag self_css_path, :media => "all" %>
  </head>

  <body>
    <div class="wrapper">
      <nav class="navbar navbar-expand-lg bg-primary">
          <div class="container" style="padding-left: 0px; padding-right: 0px;">
            <% if user_signed_in? %>
              <%= link_to image_tag("header.png", width: '260', height: '50', alt: "NAGANO RECORDS"), root_path %>
            <% elsif admin_signed_in? %>
              <%= link_to image_tag("header.png", width: '260', height: '50', alt: "NAGANO RECORDS"), root_path, class: "fas fa-user-cog", style: "font-size: 30px;" %>
            <% else %>
              <%= link_to image_tag("header.png", width: '260', height: '50', alt: "NAGANO RECORDS"), root_path %>
            <% end %>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#example-navbar" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-bar bar1"></span>
              <span class="navbar-toggler-bar bar2"></span>
              <span class="navbar-toggler-bar bar3"></span>
            </button>
            <form class="form-inline mx-auto" data-background-color>
              <div class="form-group has-white">
                <% if admin_signed_in? %>
                <% else %>
                  <input type="text" class="col-auto form-control search", style="width: 350px;", placeholder="商品やアーティスト名などで検索">
                  <button type="submit" class="btn btn-neutral btn-round">検索</button>
              </div>
                <% end %>
            </form>
              <ul class="navbar-nav">
                  <% if user_signed_in? %>
                    <li class="nav-item"><%= link_to "　"+current_user.last_name+current_user.first_name+"さん", users_path, class:"fas fa-user nav-link", style: "padding-right: 25px;" %></li>
                    <li class="nav-item"><%= link_to "　"+"カート", carts_path, class:"fas fa-shopping-cart nav-link" %></li>
                    <li class="nav-item"><%= link_to "　"+"ログアウト", destroy_user_session_path, :method => :delete, class:"fas fa-sign-out-alt nav-link" %></li>
                  <% elsif admin_signed_in? %>
                    <li class="nav-item "><%= link_to "  "+"商品一覧", admin_products_path, class:"fas fa-compact-disc nav-link" %></li>
                    <li class="nav-item"><%= link_to "　"+"注文状況", admin_orders_path, class:"fas fa-truck-moving nav-link" %></li>
                    <li class="nav-item"><%= link_to "　"+"ユーザー一覧", admin_users_path, class:"fas fa-user nav-link" %></li>
                    <li class="nav-item"><%= link_to "　"+"パスワード変更", edit_admin_password_path, class:"fas fa-unlock-alt nav-link" %></li>
                    <li class="nav-item"><%= link_to "　"+"設定", consts_edit_path, class:"fas fa-cog nav-link" %></li>
                    <li class="nav-item"><%= link_to "　"+"ログアウト", destroy_admin_session_path, :method => :delete, class:"fas fa-sign-out-alt nav-link" %></li>
                  <% else %>
                      <li class="nav-item"><%= link_to "　"+"サインイン", new_user_registration_path, class:"fas fa-user-plus nav-link" %></li>
                      <li class="nav-item"><%= link_to "　"+"ログイン", new_user_session_path, class:"fas fa-sign-in-alt nav-link","data-toggle": "modal", "data-target": "#signinModal" %></li>
                      <div class="modal fade" id="signinModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" style="margin: 200px auto; height: 700px;">
                          <div class="modal-dialog" role="document">
                          <div class="modal-content">
                            <div class="modal-header">
                            <h4 class="modal-title" id="exampleModalLabel">ログイン</h4>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                              <span aria-hidden="true">&times;</span>
                            </button>
                            </div>
                            <div class="modal-body">


                              <%= form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %>

                              <div class="mx-auto container">
                                <div class="text-align">
                                  <div class="field col-6 offset-md-3">
                                    <%= f.label :メールアドレス %><br />
                                    <%= f.email_field :email, autofocus: true, autocomplete: "email", class: "col-lg-offset-3 form-control form-control-lg w-100 validate[required, custom[email]]" %>
                                  </div>

                                  <div class="field col-6 offset-md-3 mt-md-3">
                                    <%= f.label :パスワード %><br />
                                    <%= f.password_field :password, autocomplete: "current-password", class: "col-lg-offset-3 form-control form-control-lg w-100 validate[required, manSize[6]]" %>
                                  </div>

                                  <% if devise_mapping.rememberable? %>
                                    <div class="field text-right col-9">
                                      <%= f.check_box :remember_me, class: "wskCheckbox", type: "checkbox" %> <%= f.label :このログインを記憶する %>
                                    </div>
                                  <% end %>
                                </div>
                                <div class="actions text-right col-9 mt-md-5">
                                  <%= f.submit "ログイン", class: "btn btn-success mx-auto btn-lg" %>
                                </div>
                                <% end %>
                                <div class="col-9 mt-md-3 text-right">
                                  <%= render "users/shared/links"%>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                  <% end %>
                </ul>
              </div>
      </nav>
      <%= yield %>
      <footer>
      <div align="center", style="line-height: 80px;">&copy; NAGANO RECORDS</div>
    </footer>
    </div>
  </body>
</html>
